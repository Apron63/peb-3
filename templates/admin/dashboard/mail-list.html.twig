{% extends 'admin/base.html.twig' %}

{% block title %}Панель управления | Рассылки{% endblock %}

{% block breadcrumbs %}
    <a href="{{ path('admin_homepage') }}">Панель управления</a>
    <span>/</span>
    {% if is_granted('ROLE_SUPERADMIN') %}
        <a href="{{ path('admin_dashboard') }}">Инструменты</a>
        <span>/</span>
    {% endif %}
    <span>Рассылки</span>
{% endblock %}

{% block content %}

    <h3>Рассылки</h3>

    <div class="row">
        <table class="table">
            <thead>
            <tr>
                <th>Создано</th>
                <th>Отправлено</th>
                <th>Получатель</th>
                <th>Тема</th>
                <th>Содержание</th>
            </tr>
            </thead>

            <tbody>
                {% for page in pagination %}
                    <tr>
                        <td>
                            {{ page.createdAt | date('d.m.Y H:i:s') }}
                        </td>
                        <td>
                            {% if page.sendedAt is null %}
                                -
                            {% else %}
                                {{ page.sendedAt | date('d.m.Y H:i:s') }}
                            {% endif %}
                        </td>
                        <td>
                            {% if page.user is null %}
                                {{ page.reciever }}
                            {% else%}
                                {{ page.user.fullName }}, {{ page.user.email }}
                            {% endif %}
                        </td>
                        <td>
                            {{ page.subject }}
                        </td>
                        <td>
                            <a href="{{ path('admin_dashboard_mail_list_detail', {id: page.id}) }}" class="btn btn-outline-primary">Показать</a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <nav aria-label="navigator">
        {{ knp_pagination_render(pagination) }}
    </nav>

{% endblock %}
